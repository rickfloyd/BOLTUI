{
  "entities": {
    "ForexData": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ForexData",
      "type": "object",
      "description": "Represents real-time Forex data for a specific currency pair.",
      "properties": {
        "pair": {
          "type": "string",
          "description": "The currency pair (e.g., USD/EUR)."
        },
        "rate": {
          "type": "number",
          "description": "The current exchange rate."
        },
        "bid": {
          "type": "string",
          "description": "The bid price."
        },
        "ask": {
          "type": "string",
          "description": "The ask price."
        },
        "lastUpdate": {
          "type": "string",
          "description": "The date and time of the last update.",
          "format": "date-time"
        },
        "timestamp": {
          "type": "string",
          "description": "The timestamp of when the data was fetched.",
          "format": "date-time"
        },
        "humanitarianImpact": {
          "type": "string",
          "description": "Description of humanitarian impact."
        },
        "status": {
          "type": "string",
          "description": "The status of the data (e.g., LIVE)."
        }
      },
      "required": []
    },
    "CryptoData": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CryptoData",
      "type": "object",
      "description": "Represents real-time cryptocurrency data for a specific pair.",
      "properties": {
        "pair": {
          "type": "string",
          "description": "The cryptocurrency/fiat pair (e.g., BTC/USD)."
        },
        "rate": {
          "type": "number",
          "description": "The current exchange rate."
        },
        "bid": {
          "type": "string",
          "description": "The bid price."
        },
        "ask": {
          "type": "string",
          "description": "The ask price."
        },
        "lastUpdate": {
          "type": "string",
          "description": "The date and time of the last update.",
          "format": "date-time"
        },
        "timestamp": {
          "type": "string",
          "description": "The timestamp of when the data was fetched.",
          "format": "date-time"
        },
        "humanitarianImpact": {
          "type": "string",
          "description": "Description of humanitarian impact."
        },
        "status": {
          "type": "string",
          "description": "The status of the data (e.g., LIVE)."
        }
      },
      "required": []
    },
    "HumanitarianImpact": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "HumanitarianImpact",
      "type": "object",
      "description": "Represents the humanitarian impact of the trading platform.",
      "properties": {
        "childrenFed": {
          "type": "number",
          "description": "The number of children fed through trading profits."
        },
        "totalTrades": {
          "type": "number",
          "description": "The total number of trades executed on the platform."
        },
        "totalProfit": {
          "type": "number",
          "description": "The total profit generated by the platform."
        },
        "lastUpdate": {
          "type": "string",
          "description": "The date and time of the last impact update.",
          "format": "date-time"
        },
        "mission": {
          "type": "string",
          "description": "The mission statement of the platform."
        }
      },
      "required": []
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/forex-data/{pairId}",
        "definition": {
          "entityName": "ForexData",
          "schema": {
            "$ref": "#/backend/entities/ForexData"
          },
          "description": "Stores real-time Forex data for specific currency pairs. Includes the pair ID as the document ID.",
          "params": [
            {
              "name": "pairId",
              "description": "The ID of the currency pair (e.g., USD-EUR)."
            }
          ]
        }
      },
      {
        "path": "/crypto-data/{pairId}",
        "definition": {
          "entityName": "CryptoData",
          "schema": {
            "$ref": "#/backend/entities/CryptoData"
          },
          "description": "Stores real-time cryptocurrency data for specific pairs. Includes the pair ID as the document ID.",
          "params": [
            {
              "name": "pairId",
              "description": "The ID of the cryptocurrency pair (e.g., BTC-USD)."
            }
          ]
        }
      },
      {
        "path": "/humanitarian-impact",
        "definition": {
          "entityName": "HumanitarianImpact",
          "schema": {
            "$ref": "#/backend/entities/HumanitarianImpact"
          },
          "description": "Stores overall humanitarian impact metrics, such as children fed, total trades, and total profit. Single document."
        }
      },
      {
        "path": "/users/{userId}/dashboardConfig",
        "definition": {
          "entityName": "HumanitarianImpact",
          "schema": {
            "$ref": "#/backend/entities/HumanitarianImpact"
          },
          "description": "Stores user-specific dashboard configurations. Path-based ownership.",
          "params": [
            {
              "name": "userId",
              "description": "The unique ID of the user."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore data structure is designed to support the AIQuantumCharts platform, focusing on real-time data, user personalization, and a commitment to humanitarian impact. The structure is segregated into distinct collections for Forex data, Crypto data, Humanitarian Impact, and User data to ensure clarity and maintainability. Each section uses flat collections to facilitate simple read/write rules and efficient data retrieval.\n\nAuthorization Independence is achieved by not relying on hierarchical `get()` calls in security rules. The data structure uses path-based authorization for user-specific data (dashboard configurations), ensuring that access control is straightforward and efficient.  Access to Forex and Crypto data is public (read) or restricted to authenticated users (write).  User-specific data is secured via path-based rules, where only the authenticated user can access their data.\n\nThe structure supports the required QAPs through structural segregation. Forex and Crypto data are stored in separate collections, each with its own security rules, allowing for secure `list` operations. The Humanitarian Impact data is also isolated, enabling separate management and access control. The dashboard configuration data is stored under each user's document, ensuring that only the user can access their settings."
  }
}
